{"ast":null,"code":"var _jsxFileName = \"/Users/olesyashevchenko/synthExample/app/javascript/control_components/Knob.jsx\";\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nimport PropTypes from 'prop-types';\nimport React, { PureComponent } from 'react';\n\nvar Knob = /*#__PURE__*/function (_PureComponent) {\n  _inherits(Knob, _PureComponent);\n\n  var _super = _createSuper(Knob);\n\n  function Knob(props) {\n    var _this;\n\n    _classCallCheck(this, Knob);\n\n    _this = _super.call(this, props);\n\n    _this.calcDeg = function (value) {\n      var min = _this.props.min;\n      var coef = _this.state.coef;\n\n      if (min < 0) {\n        return value * coef;\n      } else {\n        return value * coef - 140;\n      }\n    };\n\n    _this.calcRotation = function (range) {\n      var _this$state = _this.state,\n          coef = _this$state.coef,\n          deg = _this$state.deg;\n      return range * coef + deg;\n    };\n\n    _this.calcValue = function (deg) {\n      var min = _this.props.min;\n      var range = _this.state.range;\n\n      if (min < 0) {\n        return Math.floor(range / 280 * deg);\n      } else {\n        return Math.floor(range / 280 * (deg + 140));\n      }\n    };\n\n    _this.calsBulletValues = function () {\n      var _this$props = _this.props,\n          min = _this$props.min,\n          max = _this$props.max;\n      var _this$state2 = _this.state,\n          range = _this$state2.range,\n          stepCoef = _this$state2.stepCoef;\n      var bullets = [];\n\n      if (Math.sign(min) == 1) {\n        for (var i = 0; i < 5; i++) {\n          bullets.push(Math.floor(stepCoef * (i + 1)));\n        }\n      } else if (Math.sign(min) == -1) {\n        if (Math.sign(max) == -1) {\n          for (var i = 0; i < 5; i++) {\n            bullets.push(Math.floor(-stepCoef * (i + 1)));\n          }\n\n          bullets.reverse();\n        } else {\n          bullets.push(Math.floor(-stepCoef * 2));\n          bullets.push(Math.floor(-stepCoef * 1));\n          bullets.push(Math.floor(stepCoef * 0));\n          bullets.push(Math.floor(stepCoef * 1));\n          bullets.push(Math.floor(stepCoef * 2));\n        }\n      } else if (Math.sign(min) == 0) {\n        for (var i = 0; i < 5; i++) {\n          bullets.push(Math.floor(stepCoef * (i + 1)));\n        }\n      }\n\n      return bullets;\n    };\n\n    _this.handleMouseDown = function (e) {\n      e.preventDefault();\n\n      _this.setState({\n        mouseDown: true,\n        cursorY: e.screenY\n      });\n    };\n\n    _this.handleMouseMove = function (e) {\n      var _this$props2 = _this.props,\n          property = _this$props2.property,\n          min = _this$props2.min,\n          max = _this$props2.max,\n          handleChange = _this$props2.handleChange;\n      var _this$state3 = _this.state,\n          mouseDown = _this$state3.mouseDown,\n          cursorY = _this$state3.cursorY;\n\n      if (mouseDown) {\n        var cursorRange = cursorY - e.screenY;\n\n        if (cursorRange != 0) {\n          var nextDeg = _this.calcRotation(cursorRange);\n\n          var nextValue = _this.calcValue(nextDeg);\n\n          if (nextValue <= min) {\n            nextDeg = -140;\n            nextValue = min;\n          } else if (nextValue >= max) {\n            nextDeg = 140;\n            nextValue = max;\n          } else {\n            nextValue = _this.calcValue(nextDeg);\n          }\n\n          handleChange(property, nextValue);\n\n          _this.setState({\n            cursorY: e.screenY,\n            deg: nextDeg\n          });\n        }\n      }\n    };\n\n    _this.handleMouseUp = function (e) {\n      e.preventDefault();\n      var mouseDown = _this.state.mouseDown;\n\n      if (mouseDown) {\n        _this.setState({\n          mouseDown: false,\n          cursorY: 0\n        });\n      }\n    };\n\n    var _min = props.min,\n        _max = props.max;\n\n    var _range = _max - _min;\n\n    var _coef = 280 / _range;\n\n    var _stepCoef = Math.floor(_range / 6);\n\n    _this.state = {\n      mouseDown: false,\n      deg: 0,\n      cursorY: 0,\n      bullets: [],\n      range: _range,\n      coef: _coef,\n      stepCoef: _stepCoef\n    };\n    return _this;\n  }\n\n  _createClass(Knob, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      window.addEventListener('mouseup', this.handleMouseUp);\n      window.addEventListener('mousemove', this.handleMouseMove);\n      var value = this.props.value;\n      var range = this.state.range;\n      this.setState({\n        deg: this.calcDeg(value),\n        bullets: this.calsBulletValues()\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props3 = this.props,\n          min = _this$props3.min,\n          max = _this$props3.max,\n          value = _this$props3.value,\n          name = _this$props3.name;\n      var _this$state4 = this.state,\n          bullets = _this$state4.bullets,\n          deg = _this$state4.deg;\n      var styles = {\n        transform: \"rotate(\".concat(deg, \"deg)\")\n      };\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: \"Knob\",\n        onMouseDown: this.handleMouseDown,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"h3\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 159,\n          columnNumber: 9\n        }\n      }, name), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"wrapper\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 9\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"body\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 162,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        style: styles,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 163,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"group\",\n        id: \"group1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"group\",\n        id: \"group2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 173,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"group\",\n        id: \"group3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 11\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 177,\n          columnNumber: 13\n        }\n      }), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"bullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 13\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"lastBullet\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 11\n        }\n      }, \" \"), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value7\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 11\n        }\n      }, min), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value9\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 187,\n          columnNumber: 11\n        }\n      }, \"\".concat(bullets[0])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value11\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 191,\n          columnNumber: 11\n        }\n      }, \"\".concat(bullets[1])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value12\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 195,\n          columnNumber: 11\n        }\n      }, \"\".concat(bullets[2])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 199,\n          columnNumber: 11\n        }\n      }, \"\".concat(bullets[3])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value3\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }\n      }, \"\".concat(bullets[4])), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"value\",\n        id: \"value5\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }\n      }, max)));\n    }\n  }]);\n\n  return Knob;\n}(PureComponent);\n\nexport { Knob as default };\nKnob.propTypes = {\n  name: PropTypes.string.isRequired,\n  property: PropTypes.array.isRequired,\n  min: PropTypes.number.isRequired,\n  max: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n  handleChange: PropTypes.func.isRequired\n};","map":{"version":3,"sources":["/Users/olesyashevchenko/synthExample/app/javascript/control_components/Knob.jsx"],"names":["PropTypes","React","PureComponent","Knob","props","calcDeg","value","min","coef","state","calcRotation","range","deg","calcValue","Math","floor","calsBulletValues","max","stepCoef","bullets","sign","i","push","reverse","handleMouseDown","e","preventDefault","setState","mouseDown","cursorY","screenY","handleMouseMove","property","handleChange","cursorRange","nextDeg","nextValue","handleMouseUp","window","addEventListener","name","styles","transform","propTypes","string","isRequired","array","number","func"],"mappings":"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","sourcesContent":["import PropTypes from 'prop-types'\nimport React, { PureComponent } from 'react'\n\nexport default class Knob extends PureComponent {\n  constructor(props) {\n    super(props)\n\n    const { min, max } = props\n    const range = max - min\n    const coef = 280 / range\n    const stepCoef = Math.floor(range / 6)\n\n    this.state = {\n      mouseDown: false,\n      deg: 0,\n      cursorY: 0,\n      bullets: [],\n      range,\n      coef,\n      stepCoef\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('mouseup', this.handleMouseUp)\n    window.addEventListener('mousemove', this.handleMouseMove)\n\n    const { value } = this.props\n    const { range } = this.state\n\n    this.setState({\n      deg: this.calcDeg(value),\n      bullets: this.calsBulletValues()\n    })\n  }\n\n  calcDeg = (value) => {\n    const { min } = this.props\n    const { coef } = this.state\n\n    if (min < 0) {\n      return value * coef\n    } else {\n      return value * coef - 140\n    }\n  }\n\n  calcRotation = (range) => {\n    const { coef, deg } = this.state\n    return range * coef + deg\n  }\n\n  calcValue = (deg) => {\n    const { min } = this.props\n    const { range } = this.state\n\n    if (min < 0) {\n      return Math.floor((range / 280) * deg)\n    } else {\n      return Math.floor((range / 280) * (deg + 140))\n    }\n  }\n\n  calsBulletValues = () => {\n    const { min, max } = this.props\n    const { range, stepCoef } = this.state\n    const bullets = []\n\n    if (Math.sign(min) == 1) {\n      for (var i = 0; i < 5; i++) {\n        bullets.push(Math.floor(stepCoef * (i + 1)))\n      }\n    } else if (Math.sign(min) == -1) {\n      if (Math.sign(max) == -1) {\n        for (var i = 0; i < 5; i++) {\n          bullets.push(Math.floor(-stepCoef * (i + 1)))\n        }\n\n        bullets.reverse()\n      } else {\n        bullets.push(Math.floor(-stepCoef * 2))\n        bullets.push(Math.floor(-stepCoef * 1))\n        bullets.push(Math.floor(stepCoef * 0))\n        bullets.push(Math.floor(stepCoef * 1))\n        bullets.push(Math.floor(stepCoef * 2))\n      }\n    } else if (Math.sign(min) == 0) {\n      for (var i = 0; i < 5; i++) {\n        bullets.push(Math.floor(stepCoef * (i + 1)))\n      }\n    }\n\n    return bullets\n  }\n\n  handleMouseDown = (e) => {\n    e.preventDefault()\n\n    this.setState({\n      mouseDown: true,\n      cursorY: e.screenY\n    })\n  }\n\n  handleMouseMove = (e) => {\n    const { property, min, max, handleChange } = this.props\n    const { mouseDown, cursorY } = this.state\n\n    if (mouseDown) {\n      const cursorRange = cursorY - e.screenY\n\n      if (cursorRange != 0) {\n        let nextDeg = this.calcRotation(cursorRange)\n        let nextValue = this.calcValue(nextDeg)\n\n        if (nextValue <= min) {\n          nextDeg = -140\n          nextValue = min\n        } else if (nextValue >= max) {\n          nextDeg = 140\n          nextValue = max\n        } else {\n          nextValue = this.calcValue(nextDeg)\n        }\n\n        handleChange(property, nextValue)\n\n        this.setState({\n          cursorY: e.screenY,\n          deg: nextDeg\n        })\n      }\n    }\n  }\n\n  handleMouseUp = (e) => {\n    e.preventDefault()\n\n    const { mouseDown } = this.state\n\n    if (mouseDown) {\n      this.setState({\n        mouseDown: false,\n        cursorY: 0\n      })\n    }\n  }\n\n  render() {\n    const { min, max, value, name } = this.props\n    const { bullets, deg } = this.state\n\n    const styles = {\n      transform: `rotate(${deg}deg)`\n    }\n\n    return (\n      <div className=\"Knob\" onMouseDown={this.handleMouseDown}>\n        <h3>{name}</h3>\n\n        <div className=\"wrapper\">\n          <div className=\"body\">\n            <div style={styles}></div>\n          </div>\n\n          <div className=\"group\" id=\"group1\">\n            <div className=\"bullet\"></div>\n            <div className=\"bullet\"></div>\n          </div>\n\n          <div className=\"group\" id=\"group2\">\n            <div className=\"bullet\"></div>\n            <div className=\"bullet\"></div>\n          </div>\n\n          <div className=\"group\" id=\"group3\">\n            <div className=\"bullet\"></div>\n            <div className=\"bullet\"></div>\n          </div>\n\n          <div className=\"lastBullet\"> </div>\n\n          <div className=\"value\" id=\"value7\">\n            {min}\n          </div>\n\n          <div className=\"value\" id=\"value9\">\n            {`${bullets[0]}`}\n          </div>\n\n          <div className=\"value\" id=\"value11\">\n            {`${bullets[1]}`}\n          </div>\n\n          <div className=\"value\" id=\"value12\">\n            {`${bullets[2]}`}\n          </div>\n\n          <div className=\"value\" id=\"value2\">\n            {`${bullets[3]}`}\n          </div>\n\n          <div className=\"value\" id=\"value3\">\n            {`${bullets[4]}`}\n          </div>\n\n          <div className=\"value\" id=\"value5\">\n            {max}\n          </div>\n        </div>\n      </div>\n    )\n  }\n}\n\nKnob.propTypes = {\n  name: PropTypes.string.isRequired,\n  property: PropTypes.array.isRequired,\n  min: PropTypes.number.isRequired,\n  max: PropTypes.number.isRequired,\n  value: PropTypes.number.isRequired,\n  handleChange: PropTypes.func.isRequired\n}\n"]},"metadata":{},"sourceType":"module"}